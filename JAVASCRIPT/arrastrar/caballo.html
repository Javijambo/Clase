<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<script>
    //deshabilitar el ondrop de todas las celdas para que por defecto no se pueda dejar la imagen en ninguna celda
    //puesto que vamos a indicarle las celdas en las que se puede dejar la imagen en la funci√≥n Drop
    td = getElementsByTag('td');

    for (i = 0; i < td.length; i++) {
        td[i].setAttribute('ondrop', 'return null')
    }

    //variables 
    let imagen;
    let posicion;
    let puntos = 0;
    let bloqueados = ["1,1"];

    function iniciaArrastre(event) {
        imagen = event.target.getAttribute('id');
    }

    function DragOver(event) {
        event.preventDefault();
    }

    function posInicial(id) { //funcion para obtener id al que se va a mover
        pos = id.split("");
        var x = parseInt(pos[0]);
        var y = parseInt(pos[1]);

        //array con los 8 posibles movimientos 
        var posiblesx = [x + 2, x + 2, x - 2, x - 2, x + 1, x - 1, x + 1, x - 1];
        var posiblesy = [y + 1, y - 1, y + 1, y - 1, y + 2, y + 2, y - 2, y - 2];

        //bucle para activar el ondrop en las casillas que se puede mover
        for (var i = 0; i < posiblesx.length; i++) {
            if (posiblesx[i] > 0 && posiblesy[i] > 0) //para asegurarnos que no coge casillas negativas o fuera del
            {
                var nuevoid = posiblesx[i] + "," + posiblesy[i];
                document.getElementById(nuevoid).setAttribute('ondrop', 'Drop(event)');
            }
        }
        //desactivamos por los que hemos pasado 
        for (var k = 0; k < usados.length; k++) {
            if (usados[k] !== 'undefined') {
                document.getElementById(usados[k]).setAttribute('ondrop', 'return false');
            }
        }

        //funcion cuando colocamos el caballo en una casilla
        function Drop(event) {
            //metemos la posicion en el array de casillas en las que hemos pasado
            var pos = event.target.id;
            usados.push(pos);
            event.target.innerHTML = '';

            for (var i = 0; i < nodos.length; i++) {
                nodos[i].setAttribute('ondrop', 'return null');
            }
            //desactivamos la casilla y la ponemos de color rosa
            event.target.setAttribute('ondragover', 'return false');
            event.target.setAttribute('ondrop', 'return false');
            event.target.setAttribute('bgcolor', 'pink');
            event.target.appendChild(document.getElementById(imagen));
            event.preventDefault();
            event.stopPropagation();
            return false;
        }
</script>

<body>
    <table width="400" height="400px" border="0" cellspacing="2" cellpadding="2" bgcolor="#000000">
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)">
                <font color="#ffffff"><img src="caballo.gif" draggable="true" id="caballo" ondragstart="iniciaArrastre(event)" /></font>
            </td>

            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,2" bgcolor="#ffffff">(1,2)</td>

            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,3">
                <font color="#ffffff">(1,3)</font>
            </td>


            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,4" bgcolor="#ffffff"></td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,5">
                <font color="#ffffff">(1,5)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,6" bgcolor="#ffffff">(1,6)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,7">
                <font color="#ffffff">(1,7)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="1,8" bgcolor="#ffffff">(1,8)</td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,1" bgcolor="#ffffff">(2,1)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,2">
                <font color="#ffffff">(2,2)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,3" bgcolor="#ffffff">(2,3)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,4">
                <font color="#ffffff">(2,4)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,5" bgcolor="#ffffff">(2,5)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,6">
                <font color="#ffffff">(2,6)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,7" bgcolor="#ffffff">(2,7)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="2,8">
                <font color="#ffffff">(2,8)</font>
            </td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,1">
                <font color="#ffffff">(3,1)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,2" bgcolor="#ffffff">(3,2)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,3">
                <font color="#ffffff">(3,3)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,4" bgcolor="#ffffff">(3,4)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,5">
                <font color="#ffffff">(3,5)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,6" bgcolor="#ffffff">(3,6)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,7">
                <font color="#ffffff">(3,7)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="3,8" bgcolor="#ffffff">(3,8)</td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,1" bgcolor="#ffffff">(4,1)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,2">
                <font color="#ffffff">(4,2)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,3" bgcolor="#ffffff">(4,3)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,4">
                <font color="#ffffff">(4,4)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,5" bgcolor="#ffffff">(4,5)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,6">
                <font color="#ffffff">(4,6)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,7" bgcolor="#ffffff">(4,7)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="4,8">
                <font color="#ffffff">(4,8)</font>
            </td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,1">
                <font color="#ffffff">(5,1)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,2" bgcolor="#ffffff">(5,2)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,3">
                <font color="#ffffff">(5,3)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,4" bgcolor="#ffffff">(5,4)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,5">
                <font color="#ffffff">(5,5)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,6" bgcolor="#ffffff">(5,6)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,7">
                <font color="#ffffff">(5,7)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="5,8" bgcolor="#ffffff">(5,8)</td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,1" bgcolor="#ffffff">(6,1)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,2">
                <font color="#ffffff">(6,2)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,3" bgcolor="#ffffff">(6,3)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,4">
                <font color="#ffffff">(6,4)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,5" bgcolor="#ffffff">(6,5)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,6">
                <font color="#ffffff">(6,6)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,7" bgcolor="#ffffff">(6,7)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="6,8">
                <font color="#ffffff">(6,8)</font>
            </td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,1">
                <font color="#ffffff">(7,1)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,2" bgcolor="#ffffff">(7,2)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,3">
                <font color="#ffffff">(7,3)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,4" bgcolor="#ffffff">(7,4)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,5">
                <font color="#ffffff">(7,5)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,6" bgcolor="#ffffff">(7,6)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,7">
                <font color="#ffffff">(7,7)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="7,8" bgcolor="#ffffff">(7,8)</td>
        </tr>
        <tr align="center">
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,1" bgcolor="#ffffff">(8,1)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,2">
                <font color="#ffffff">(8,2)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,3" bgcolor="#ffffff">(8,3)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,4">
                <font color="#ffffff">(8,4)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,5" bgcolor="#ffffff">(8,5)</td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,6">
                <font color="#ffffff">(8,6)</font>
            </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,7" bgcolor="#ffffff">(8,7) </td>
            <td ondragover="DragOver(event)" onmousedown="posInicial(this.id)" id="8,8">
                <font color="#ffffff">(8,8)</font>
            </td>
        </tr>
    </table>

</body>

</html>