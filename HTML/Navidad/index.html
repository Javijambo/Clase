<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css.css">
    <title>Document</title>
</head>


<body>
    <header>
        <h1>Feliz Navidad!</h1>
    </header>
    <footer>
        Los alumnos del IES Ribera de Castilla
    </footer>
    <article id="izquierda">
        <img src="Imagenes/main.jpg" usemap="#image-map">
        <map name="image-map">
            <area target="_blank" alt="R2D2" title="R2D2" href="Imagenes/comercial+modifications.jpg"
                coords="152,499,0,212" shape="rect">
            <area target="_blank" alt="Yoda" title="Yoda" href="Imagenes/babyyoda.jpg" coords="154,76,316,488"
                shape="rect">
            <area target="_blank" alt="Darth Vader" title="Darth Vader" href="Imagenes/modifications_allowed.jpg"
                coords="467,497,318,120" shape="rect">
            <area target="_blank" alt="StormTrooper" title="StormTrooper" href="Imagenes/lego-3024169_1920.jpg"
                coords="481,153,600,513" shape="rect">
        </map>
    </article>
    <aside>
        <p>Jingle bells, jingle bells<br>Jingle all the way<br>Oh, what fun it is to ride<br>In a one-horse open sleigh, hey<br>Jingle bells, jingle bells<br>Jingle all the way<br>Oh, what fun it is to ride<br>In a one-horse open sleigh</p>
        <img src="Imagenes/navidad.gif" width=100%>
        <audio id="audio1">
            <source src="Imagenes/p1.mp3" />
        </audio>
        <article class="container">
            <article class="progress" id="progress"></article>
            <audio id="audio" src="Imagenes/p1.mp3"></audio>
        </article>
        <article id="botones">
            <button class="play" onClick="play()">Play</button>
            <button class="pause" onClick="pause()">Pause</button>
        </article>
    </aside>
    <script>
        var timer;
        var percent = 0;
        var audio = document.getElementById("audio");
        audio.addEventListener("playing", function(_event) {
            var duration = _event.target.duration;
            advance(duration, audio);
        });
        audio.addEventListener("pause", function(_event) {
            clearTimeout(timer);
        });
        var advance = function(duration, element) {
            var progress = document.getElementById("progress");
            increment = 10 / duration
            percent = Math.min(increment * element.currentTime * 10, 100);
            progress.style.width = percent + '%'
            startTimer(duration, element);
        }
        var startTimer = function(duration, element) {
            if (percent < 100) {
                timer = setTimeout(function() {
                    advance(duration, element)
                }, 100);
            }
        }

        function play() {
            audio.play();
        }

        function pause() {
            audio.pause();
        }
    </script>

</body>

</html>